# Hixtrip FE Online

## 前端高级/架构师需求

请移步至[v1 分支](https://github.com/hixtrip/fe-online/tree/v1)

## 准备

- fork 此仓库
- 根据如下要求实现相关代码
- 完成要求
  - 提交`pull request`
  - 提供页面截图

## 需求

> 当前已有初始化的`monorepo`仓库, 已经包含`backend/auth-service`, `apps/auth-app`, `apps/manage-app`项目。

- `backend/auth-service`项目已包含登陆接口、获取用户信息接口
  - 如何设计`BFF`层架构, 统一这两个接口，使得前端只需要调用一次登陆，返回登陆成功的`token`以及`用户信息`
- `auth-app` 采用`React`实现，`manage-app` 采用`Vue`实现
  - 需要使用`auth-app` 调用第一步实现的接口，并存储相关的`token`信息
  - `manage-app` 采用微前端方案内嵌 `auth-app`的功能

> 其他加分点：如何设计`git flow`规范, 设计`vue`, `react`, `backend`开发规范 etc. 或者请写出关于前端架构的思考，想法。


如何设计`git flow`规范

命名规范：一般来说命名规范各公司都会有各自的定义，基本上是feat<新需求>，fix<修复>+'_'+开始开发时间到年月日+需求名字或者模块名称，比如：feat_2019-01-01_用户管理

原则：一个模块内容的代码在一次迭代里，只让一个人开发，如果存在多人开发，容易出现代码冲突，这个时候往往是协调人员，让一个人负责一个模块，或者协调产品进度，产品需求进行错开开发和发版。

第一份工作，环境分为生产master、开发dev、测试test、预生产、prod
1. master分支只做代码合并，不允许直接提交代码，所有开发人员的代码从master拉开发分支。
2. develop分支作为开发分支，所有开发人员提交代码到develop分支，进行前后端联调。
3. test分支作为测试分支，所有开发人员提测代码提交代码到test分支, 进行提测。
4. prod分支作为预生产分支，所有开发人员提交代码到pre-prod分支，进行上线前的最后验证。
5. master分支作为生产分支，所有开发人员提交代码到master分支，进行线上发布。

以上过程，出现冲突需要多次解决冲突。


最新的一份工作，是会在每次上线的时候，从master中拉一条基线分支，然后每次迭代需要上线的代码都往基线上合并，然后基线合并到预发、灰度以及生成，且合并代码时需要审批，这样的话代码提交安全以及每次提交代码时如果有冲突只需要在上线分支上解决一次冲突，并且尽量的保证了预发，灰度的环境跟生产环境的代码保持一致。

设计`vue`, `react`, `backend`开发规范 etc

1、项目结构规范化：

将项目文件按照功能或模块进行组织，例如将组件、路由、状态管理等分别放置在不同的目录下。
使用一些脚手架工具初始化项目，如：vue-clih、Create React App，遵循它们的项目结构和约定。

2、命名规范：
组件名使用 PascalCase，例如 MyComponent.js。驼峰命名法。
文件名使用 kebab-case，例如 my-component.js。

3、代码风格规范：
使用eslint进行代码格式化，可以参考一些大厂的eslint配置。

4、组件规范：
（1）组件应该尽量小而简单，遵循单一职责原则。
（2）组件的拆分不一定是为了高复用，为了简化代码的业务逻辑也可以进行拆分。一般dailog、modal、popup等组件可以单独抽离出来。

5、样式规范：
（1）样式尽量不要使用 inline 样式，而是使用 CSS 预处理器或 CSS 框架。
（2）类名的定义不要使用驼峰。

6、路由规范：
使用 React Router 进行路由管理，将路由配置抽取到单独的文件中。
使用动态路由和嵌套路由，以适应不同的页面结构和功能需求。

7、错误处理规范：
（1）使用 try-catch 块捕获异步操作的错误。
（2）有条件可以进行错误日志捕获的开发或者使用sentry等三方库进行开发。

8、性能优化规范：
（1）vue中，如v-if 和 v-show的使用，v-for 的 key 的使用。
（2）react中，合理使用 useMemo 和 useCallback 来优化性能。